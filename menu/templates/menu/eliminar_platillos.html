{% extends 'menu/PlantillaEntorno.html' %}
{% load static %}

{% block titulo %}
<title>El Salón selecto</title>
{% endblock titulo %}
  
{% block estilos %}
<link rel='stylesheet' href='https://vjs.zencdn.net/5-unsafe/video-js.css'>
<link rel="stylesheet" href="{% static 'menu\css\style_entorno.css' %}">
{% endblock estilos %}

{% block body %}
<div class="container">
  <div class="sidebar">
    <span class="logo">S</span>
    <a class="logo-expand" href="#">El Salón Selecto</a>
    <div class="side-wrapper">
      <div class="side-title">MENU</div>
      <div class="side-menu">
        <a href="entorno.html" class="sidebar-link discover " href="#">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path
              d="M9.135 20.773v-3.057c0-.78.637-1.414 1.423-1.414h2.875c.377 0 .74.15 1.006.414.267.265.417.625.417 1v3.057c-.002.325.126.637.356.867.23.23.544.36.87.36h1.962a3.46 3.46 0 002.443-1 3.41 3.41 0 001.013-2.422V9.867c0-.735-.328-1.431-.895-1.902l-6.671-5.29a3.097 3.097 0 00-3.949.072L3.467 7.965A2.474 2.474 0 002.5 9.867v8.702C2.5 20.464 4.047 22 5.956 22h1.916c.68 0 1.231-.544 1.236-1.218l.027-.009z" />
          </svg>
          Casa
        </a>
        <a href="platillos.html" class="sidebar-link trending" href="#">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path fill-rule="evenodd" clip-rule="evenodd"
              d="M10.835 12.007l.002.354c.012 1.404.096 2.657.242 3.451 0 .015.16.802.261 1.064.16.38.447.701.809.905a2 2 0 00.91.219c.249-.012.66-.137.954-.242l.244-.094c1.617-.642 4.707-2.74 5.891-4.024l.087-.09.39-.42c.245-.322.375-.715.375-1.138 0-.379-.116-.758-.347-1.064-.07-.099-.18-.226-.28-.334l-.379-.397c-1.305-1.321-4.129-3.175-5.593-3.79 0-.013-.91-.393-1.343-.407h-.057c-.665 0-1.286.379-1.603.991-.087.168-.17.496-.233.784l-.114.544c-.13.874-.216 2.216-.216 3.688zm-6.332-1.525C3.673 10.482 3 11.162 3 12a1.51 1.51 0 001.503 1.518l3.7-.328c.65 0 1.179-.532 1.179-1.19 0-.658-.528-1.191-1.18-1.191l-3.699-.327z" />
          </svg>
          Platillos
        </a>
        <a href="carrito.html" class="sidebar-link" href="#">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path
              d="M11.23 7.29V3.283c0-.427.34-.782.77-.782.385 0 .711.298.763.677l.007.104v4.01h4.78c2.38 0 4.335 1.949 4.445 4.38l.005.215v5.04c0 2.447-1.887 4.456-4.232 4.569l-.208.005H6.44c-2.38 0-4.326-1.94-4.435-4.379L2 16.905v-5.03c0-2.447 1.878-4.466 4.222-4.58l.208-.004h4.8v6.402l-1.6-1.652a.755.755 0 00-1.09 0 .81.81 0 00-.22.568c0 .157.045.32.14.459l.08.099 2.91 3.015c.14.155.34.237.55.237a.735.735 0 00.465-.166l.075-.071 2.91-3.015c.3-.31.3-.816 0-1.126a.755.755 0 00-1.004-.077l-.086.077-1.59 1.652V7.291h-1.54z" />
          </svg>
          Carrito
        </a>
        <a href="form.html" class="sidebar-link" href="#">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path fill-rule="evenodd" clip-rule="evenodd"
              d="M17.769 8.382H22C22 4.985 19.964 3 16.516 3H7.484C4.036 3 2 4.985 2 8.338v7.324C2 19.015 4.036 21 7.484 21h9.032C19.964 21 22 19.015 22 15.662v-.313h-4.231c-1.964 0-3.556-1.552-3.556-3.466 0-1.915 1.592-3.467 3.556-3.467v-.034zm0 1.49h3.484c.413 0 .747.326.747.728v2.531a.746.746 0 01-.747.728H17.85c-.994.013-1.864-.65-2.089-1.595a1.982 1.982 0 01.433-1.652 2.091 2.091 0 011.576-.74zm.151 2.661h.329a.755.755 0 00.764-.745.755.755 0 00-.764-.746h-.329a.766.766 0 00-.54.213.727.727 0 00-.224.524c0 .413.34.75.764.754zM6.738 8.382h5.644a.755.755 0 00.765-.746.755.755 0 00-.765-.745H6.738a.755.755 0 00-.765.737c0 .413.341.75.765.754z" />
          </svg>
          Tarjeta
        </a>
        <a href="agregar_platillos.html" class="sidebar-link trending" href="#">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path fill-rule="evenodd" clip-rule="evenodd"
              d="M10.835 12.007l.002.354c.012 1.404.096 2.657.242 3.451 0 .015.16.802.261 1.064.16.38.447.701.809.905a2 2 0 00.91.219c.249-.012.66-.137.954-.242l.244-.094c1.617-.642 4.707-2.74 5.891-4.024l.087-.09.39-.42c.245-.322.375-.715.375-1.138 0-.379-.116-.758-.347-1.064-.07-.099-.18-.226-.28-.334l-.379-.397c-1.305-1.321-4.129-3.175-5.593-3.79 0-.013-.91-.393-1.343-.407h-.057c-.665 0-1.286.379-1.603.991-.087.168-.17.496-.233.784l-.114.544c-.13.874-.216 2.216-.216 3.688zm-6.332-1.525C3.673 10.482 3 11.162 3 12a1.51 1.51 0 001.503 1.518l3.7-.328c.65 0 1.179-.532 1.179-1.19 0-.658-.528-1.191-1.18-1.191l-3.699-.327z" />
          </svg>
          Agregar platillos
        </a>
        <a href="eliminar_platillos.html" class="sidebar-link trending  is-active"  href="#">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path fill-rule="evenodd" clip-rule="evenodd"
              d="M10.835 12.007l.002.354c.012 1.404.096 2.657.242 3.451 0 .015.16.802.261 1.064.16.38.447.701.809.905a2 2 0 00.91.219c.249-.012.66-.137.954-.242l.244-.094c1.617-.642 4.707-2.74 5.891-4.024l.087-.09.39-.42c.245-.322.375-.715.375-1.138 0-.379-.116-.758-.347-1.064-.07-.099-.18-.226-.28-.334l-.379-.397c-1.305-1.321-4.129-3.175-5.593-3.79 0-.013-.91-.393-1.343-.407h-.057c-.665 0-1.286.379-1.603.991-.087.168-.17.496-.233.784l-.114.544c-.13.874-.216 2.216-.216 3.688zm-6.332-1.525C3.673 10.482 3 11.162 3 12a1.51 1.51 0 001.503 1.518l3.7-.328c.65 0 1.179-.532 1.179-1.19 0-.658-.528-1.191-1.18-1.191l-3.699-.327z" />
          </svg>
          Eliminar platillos
        </a>
      </div>
    </div>
    <div class="side-wrapper">
      <div class="side-menu">
      </div>
    </div>
  </div>
  <div class="wrapper">
    <div class="header">
      <div class="user-menu">
        <div class="user-info">
          <img src="{{ request.session.user_foto }}" alt="Foto de perfil del usuario">
          <p class="user-name">{{ request.session.user_nombre }}</p>
          <div class="arrow-down"></div>
        </div>
        <div class="dropdown-menu">
          <ul>
            <li><a href="{% url 'perfil' %}">Perfil</a></li>
            <li><a href="{% url 'nosotros' %}">Nosotros</a></li>
            <li><a href="{% url 'index' %}">Cerrar sesión</a></li>
          </ul>
        </div>
      </div>
    </div>
    <div class="main-container">
      <div class="title">Eliminar platillo</div>
      
      {% load static %}

      {% block javascript %}
          <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
          <script src="{% static 'menu/js/confirmacion.js' %}"></script>
          <script>
            document.addEventListener('DOMContentLoaded', function () {
              const removeButtons = document.getElementsByClassName('remove-product');
              Array.from(removeButtons).forEach(function(button) {
                button.addEventListener('click', function (event) {
                  event.preventDefault(); // Evitar el comportamiento predeterminado del botón
                  const form = button.closest('form');
                  Swal.fire({
                    icon: 'success',
                    title: 'Platillo eliminado',
                    text: 'El platillo ha sido eliminado exitosamente.',
                    confirmButtonColor: '#3085d6',
                    confirmButtonText: 'Aceptar'
                  }).then(function(result) {
                    if (result.value) { // Verificar si se hace clic en "Aceptar"
                      form.submit(); // Envío automático del formulario
                      location.reload(); // Recargar la página después de enviar el formulario
                    }
                  });
                });
              });
            });
            
          </script>
      {% endblock %}

      <form method="POST" action="{% url 'eliminar_platillos' %}">
  {% csrf_token %}
  <div class="Informacion-del-Usuario">
    <div class="product-list">
      {% for platillo in platillos %}
      <div class="product">
        <div class="product-info">
          <h3 class="product-title">{{ platillo.nombre }}</h3>
          <p class="product-description">{{ platillo.descripcion }}</p>
          <p class="product-price">{{ platillo.precio }}</p>
        </div>
        <button class="remove-product" name="platillo_id" value="{{ platillo.id_comida }}">Eliminar</button>
      </div>
      {% endfor %}
    </div>
  </div>
</form>
    </div>
{% endblock body %}

{% block script %}
<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
<script src='https://vjs.zencdn.net/5-unsafe/video.js'></script>
<script src="{% static 'menu\js\script_entorno.js' %}"></script>
{% endblock script %}